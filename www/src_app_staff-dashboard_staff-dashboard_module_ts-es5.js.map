{"version":3,"sources":["webpack:///src/app/staff-dashboard/staff-dashboard-routing.module.ts","webpack:///src/app/staff-dashboard/staff-dashboard.module.ts","webpack:///src/app/staff-dashboard/staff-dashboard.page.ts","webpack:///src/app/staff-dashboard/staff-dashboard.page.scss","webpack:///src/app/staff-dashboard/staff-dashboard.page.html"],"names":["routes","path","component","StaffDashboardPage","StaffDashboardPageRoutingModule","NgModule","imports","RouterModule","exports","StaffDashboardPageModule","CommonModule","FormsModule","IonicModule","declarations","network","loadingController","router","history","sync_history","total","kgt","rst","wst","dst","sale_filter","item_filter","isLoading","sync_res","userid","JSON","parse","localStorage","getItem","create","then","a","present","dismiss","console","log","get_gas_value","get_staff_details","get_shistory","get_sync_history","get_gas_value_online","y","length","parseFloat","stored_history","subscribe","res","gasv","gas_value","val","error","ogas_value","sync","sync_g","ogres","sync_gas_online","data","gas","edit_g","bres","gres","get_staff","staff","staff_name","fname","lname","staff_position","position","calc_total","sync_h","db","table","sync_db","sync_local","f","t","from","to","u","search_shistory","d","filter","record","sale","calc_ftotal","type","clear","navigate","RopeService","LoadingController","Router","Component","selector","template"],"mappings":"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","file":"src_app_staff-dashboard_staff-dashboard_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StaffDashboardPage } from './staff-dashboard.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StaffDashboardPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StaffDashboardPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StaffDashboardPageRoutingModule } from './staff-dashboard-routing.module';\n\nimport { StaffDashboardPage } from './staff-dashboard.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StaffDashboardPageRoutingModule\n  ],\n  declarations: [StaffDashboardPage]\n})\nexport class StaffDashboardPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { RopeService } from '../rope.service';\nimport { LoadingController } from '@ionic/angular';\nimport { format, parseISO } from 'date-fns';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-staff-dashboard',\n  templateUrl: './staff-dashboard.page.html',\n  styleUrls: ['./staff-dashboard.page.scss'],\n})\nexport class StaffDashboardPage implements OnInit {\n  gas_value: any;\n  userid: any;\n  staff_name: any;\n  staff_position: any;\n  from: any;\n  stored_history: any;\n  to: any;\n  history = [];\n  sync_history = [];\n  total = 0;\n  kgt = 0;\n  rst = 0;\n  wst = 0;\n  dst = 0;\n  bres: any;\n  gres: any;\n  sale_filter: string = '';\n  item_filter: string = '';\n  isLoading = false;\n  sync_res= '';\n  sync_h: any;\n  ogas_value: any;\n  sync_g: string;\n  ogres: string;\n  gas: string;\n\n  constructor(\n    public network: RopeService,\n    public loadingController: LoadingController,\n    private router: Router\n  ) {\n    this.userid = JSON.parse(localStorage.getItem('userid'));\n    // console.log(this.userid);\n  }\n\n  ngOnInit() {\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      // duration: 5000,\n    }).then(a => {\n      a.present().then(() => {\n        // console.log('presented');\n        if (!this.isLoading) {\n          a.dismiss().then(() => console.log('abort presenting'));\n        }\n      });\n    });\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => console.log('dismissed'));\n  }\n\n  ionViewDidEnter() {\n    this.get_gas_value();\n    this.get_staff_details();\n    this.get_shistory();\n    this.get_sync_history();\n    this.get_gas_value_online();\n  }\n\n  calc_total() {\n    this.total = 0;\n    this.kgt = 0;\n    for (var y = 0; y < this.history.length; y++) {\n      this.total += parseFloat(this.history[y]['total']);\n\n      if (this.history[y]['type'] == 'Gas') {\n        this.kgt += parseFloat(this.history[y]['item']);\n      }\n    }\n  }\n\n  calc_ftotal() {\n    this.total = 0;\n    this.kgt = 0;\n    for (var y = 0; y < this.stored_history.length; y++) {\n      this.total += parseFloat(this.stored_history[y]['total']);\n\n      if (this.stored_history[y]['type'] == 'Gas') {\n        this.kgt += parseFloat(this.stored_history[y]['item']);\n      }\n    }\n  }\n\n  get_gas_value() {\n    this.network.get_gas_value().subscribe((res: any) => {\n      // console.log(\"SUCCESS ===\",res);\n      // console.log(res);\n      let gasv = res[0];\n      this.gas_value = gasv.val;\n    }, (error: any) => {\n      console.log(\"ERROR ===\", error);\n    });\n  }\n\n  get_gas_value_online(){\n    this.network.get_gas_value_online().subscribe((res:any) => {\n      // console.log(\"SUCCESS ===\",res);\n      // console.log(res);\n      let gasv = res[0];\n      this.ogas_value = gasv.val;\n\n      if(gasv.sync == 'No'){\n        this.sync_g = \"true\";\n      }\n    },(error: any) => {\n      // console.log(\"ERROR ===\",error);\n      this.ogres = \"Check internet connection\";\n    });\n  }\n\n  sync_gas(){\n    this.network.sync_gas_online().subscribe((res:any) => {\n      // console.log(\"SUCCESS ===\",res);\n      // console.log(res);\n\n      if(res == 'success'){\n        this.sync_g = \"false\";\n        let data = {\n          gas: this.ogas_value\n        }\n        this.network.edit_g(data).subscribe((res:any) => {\n          // console.log(\"SUCCESS ===\",res);\n          if(res == \"bad\"){\n            this.bres = \"Something went wrong, please try again\";\n          }else{\n            this.gres = 'success';\n            this.gas = '';\n            this.get_gas_value();\n          }\n        },(error: any) => {\n          this.bres = \"Something went wrong\";\n        });\n      }else{\n        this.ogres = \"Something went wrong, please try again\";\n      }\n    },(error: any) => {\n      this.ogres = \"Check internet connection\";\n      // console.log(\"ERROR ===\",error);\n    });\n  }\n\n  get_staff_details() {\n    this.network.get_staff(this.userid).subscribe((res: any) => {\n      // console.log(\"SUCCESS ===\",res);\n      // console.log(res);\n      let staff = res[0];\n      this.staff_name = staff.fname + ' ' + staff.lname;\n      this.staff_position = staff.position;\n    }, (error: any) => {\n      console.log(\"ERROR ===\", error);\n    });\n  }\n\n  get_shistory() {\n    this.network.get_shistory(this.userid).subscribe((res: any) => {\n      // console.log(\"SUCCESS ===\",res);\n      this.stored_history = res;\n      this.history = this.stored_history;\n      this.calc_total();\n      // console.log(res);\n    }, (error: any) => {\n      console.log(\"ERROR ===\", error);\n    });\n  }\n\n  get_sync_history() {\n    this.network.get_sync_history(this.userid).subscribe((res: any) => {\n      this.sync_history = res;\n      if(this.sync_history.length <= 0){\n        this.sync_res = \"Nothing to sync\";\n        this.sync_h = \"true\";\n      }else{\n        this.sync_res = \"Something to sync\";\n        this.sync_h = \"false\";\n      }\n    }, (error: any) => {\n      this.sync_res = \"Check network availability\";\n    });\n  }\n\n  sync_db(){\n    let data = {\n      db:this.sync_history,\n      table:'history'\n    }\n    this.network.sync_db(data).subscribe((res: any) => {\n      if(res = \"success\"){\n        this.sync_local();\n        this.sync_res = \"Data synced\";\n      }else{\n        this.sync_res = \"Data did not sync\";\n      }\n    }, (error: any) => {\n      this.sync_res = \"Check network availability\";\n    });\n  }\n\n  sync_local(){\n    this.network.sync_local(this.userid).subscribe((res: any) => {\n      if(res = \"success\"){\n        this.sync_res = \"Nothing to sync\";\n      }else{\n        this.sync_res = \"Something to sync\";\n      }\n    }, (error: any) => {\n      this.sync_res = \"Check network availability\";\n    });\n  }\n\n\n\n  search_shistory(f, t) {\n    this.present();\n    let data = {\n      from: format(parseISO(f), 'yyyy-MM-d'),\n      to: format(parseISO(t), 'yyyy-MM-d'),\n      u: this.userid\n    }\n    this.network.search_shistory(data).subscribe((res: any) => {\n      // console.log(\"SUCCESS ===\",res);\n      if (res == \"error\") {\n        this.bres = \"email or password is wrong\";\n        this.dismiss();\n      } else {\n        this.stored_history = res;\n        this.history = res;\n        this.calc_total();\n        this.dismiss();\n      }\n    }, (error: any) => {\n      console.log(\"ERROR ===\", error);\n      this.dismiss();\n    });\n  }\n\n\n  filter_history(d) {\n\n    this.stored_history = this.history;\n\n    if (this.sale_filter != '') {\n      this.stored_history = this.stored_history.filter(record => record.sale === this.sale_filter);\n      // console.log(this.history);\n      this.calc_ftotal();\n    }\n\n    if (this.item_filter != '') {\n      this.stored_history = this.stored_history.filter(record => record.type === this.item_filter);\n      // console.log(this.history);\n      this.calc_ftotal();\n    }\n  }\n\n  logout() {\n    localStorage.clear();\n    this.router.navigate(['/home'])\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzdGFmZi1kYXNoYm9hcmQucGFnZS5zY3NzIn0= */\";","export default \"<ion-content>\\n  <div class=\\\"container-scroller\\\">\\n    <!-- partial:partials/_navbar.html -->\\n\\n    <!-- partial -->\\n    <div class=\\\"container-fluid page-body-wrapper\\\" style=\\\"min-height: 800px;\\\">\\n      <!-- partial:partials/_sidebar.html -->\\n      <nav class=\\\"sidebar sidebar-offcanvas\\\" id=\\\"sidebar\\\">\\n        <ul class=\\\"nav\\\">\\n          <li class=\\\"nav-item nav-profile\\\">\\n            <a [routerLink]=\\\"['/staffs']\\\" class=\\\"nav-link\\\">\\n              <div class=\\\"nav-profile-image\\\">\\n                <img src=\\\"assets/images/faces/pic-1.png\\\" alt=\\\"profile\\\">\\n                <span class=\\\"login-status online\\\"></span>\\n                <!--change to offline or busy as needed-->\\n              </div>\\n              <div class=\\\"nav-profile-text d-flex flex-column\\\">\\n                <span class=\\\"font-weight-bold mb-2\\\">{{staff_name}}</span>\\n                <span class=\\\"text-secondary text-small\\\">{{staff_position}}</span>\\n              </div>\\n            </a>\\n          </li>\\n          <li class=\\\"nav-item\\\">\\n            <a class=\\\"nav-link\\\" [routerLink]=\\\"['/gas-sales']\\\">\\n              <span class=\\\"menu-title\\\">Sales</span>\\n              <i class=\\\"mdi mdi-chart-bar menu-icon\\\"></i>\\n            </a>\\n          </li>\\n          <li class=\\\"nav-item\\\">\\n            <a class=\\\"nav-link\\\" [routerLink]=\\\"['/home']\\\">\\n              <span class=\\\"menu-title\\\">Logout</span>\\n              <i class=\\\"mdi mdi-chevron-double-right menu-icon\\\"></i>\\n            </a>\\n          </li>\\n        </ul>\\n      </nav>\\n      <!-- partial -->\\n      <div class=\\\"main-panel\\\">\\n        <div class=\\\"content-wrapper\\\">\\n\\n          <div class=\\\"page-header\\\">\\n            <h3 class=\\\"page-title\\\">\\n              <span class=\\\"page-title-icon bg-gradient-primary text-white mr-2\\\">\\n                <i class=\\\"mdi mdi-home\\\"></i>\\n              </span> Dashboard\\n            </h3>\\n            <nav aria-label=\\\"breadcrumb\\\">\\n              <ul class=\\\"breadcrumb\\\">\\n                <li class=\\\"breadcrumb-item active\\\" aria-current=\\\"page\\\">\\n                  <span></span>Overview <i class=\\\"mdi mdi-alert-circle-outline icon-sm text-primary align-middle\\\"></i>\\n                </li>\\n              </ul>\\n            </nav>\\n          </div>\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-md-4 stretch-card grid-margin\\\">\\n              <div class=\\\"card bg-gradient-success card-img-holder text-white\\\">\\n                <div class=\\\"card-body\\\">\\n                  <img src=\\\"assets/images/dashboard/circle.svg\\\" class=\\\"card-img-absolute\\\" alt=\\\"circle-image\\\" />\\n                  <h4 class=\\\"font-weight-normal mb-3\\\">Gas Available <i class=\\\"mdi mdi-diamond mdi-24px float-right\\\"></i>\\n                  </h4>\\n                  <h2 class=\\\"mb-5\\\">{{gas_value}} KG</h2>\\n                </div>\\n              </div>\\n            </div>\\n\\n            <div class=\\\"col-md-12\\\">\\n\\n              <ion-button *ngIf=\\\"sync_g == 'true'\\\" (click)=\\\"sync_gas()\\\" color=\\\"primary\\\">SYNC LOCAL TO LIVE</ion-button>\\n              <p style=\\\"color:red;\\\">{{ogres}}</p>\\n            </div>\\n\\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"card\\\">\\n                <div class=\\\"card-body\\\">\\n                  <h4 class=\\\"card-title\\\">Search Records</h4>\\n\\n                  <div class=\\\"form-sample\\\">\\n                    <p class=\\\"red\\\" style=\\\"color:red;\\\"></p>\\n                    <div class=\\\"row\\\">\\n                      <div class=\\\"col-md-6\\\">\\n                        <ion-item>\\n                          <ion-label>MM DD YY</ion-label>\\n                          <ion-datetime [(ngModel)]=\\\"from\\\" displayFormat=\\\"D-MM-YYYY\\\" min=\\\"2021\\\"></ion-datetime>\\n                        </ion-item>\\n                      </div>\\n                      <div class=\\\"col-md-6\\\">\\n                        <ion-item>\\n                          <ion-label>MM DD YY</ion-label>\\n                          <ion-datetime [(ngModel)]=\\\"to\\\" displayFormat=\\\"D-MM-YYYY\\\" min=\\\"2021\\\"></ion-datetime>\\n                        </ion-item>\\n                      </div>\\n\\n                      <div class=\\\"col-md-6\\\">\\n                        <ion-button (click)=\\\"search_shistory(from, to)\\\" color=\\\"primary\\\">SEARCH\\n                        </ion-button>\\n                      </div>\\n                    </div>\\n\\n                    <div class=\\\"row\\\">\\n                      <div class=\\\"col-md-6\\\">\\n                        \\n                        <ion-button *ngIf=\\\"sync_h == 'false'\\\" (click)=\\\"sync_db()\\\" color=\\\"primary\\\">SYNC DATABASE\\n                        </ion-button>\\n                        <p><small style=\\\"color: black;\\\">{{sync_res}}</small></p>\\n                      </div>\\n                    </div>\\n\\n\\n\\n\\n\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n\\n            <div class=\\\"col-md-12 grid-margin stretch-card\\\">\\n              <div class=\\\"card\\\">\\n                <div class=\\\"card-body\\\">\\n                  <h4 class=\\\"card-title\\\">Records<span style=\\\"float: right;\\\"><strong>TOtal: </strong> {{total}}<strong>\\n                        Total KG: </strong> {{kgt}}</span></h4>\\n                  <div class=\\\"form-inline\\\">\\n\\n                    <div class=\\\"input-group mb-2 mr-sm-4\\\">\\n                      <div class=\\\"form-sample\\\">\\n                        <div class=\\\"row\\\">\\n                          <div class=\\\"col-md-6\\\">\\n                            <label style=\\\"color: black;\\\">Sales type</label>\\n                            <select (change)=\\\"filter_history('sale')\\\" [(ngModel)]=\\\"sale_filter\\\" class=\\\"form-control\\\">\\n                              <option value=\\\"\\\">Filter by sale type</option>\\n                              <option value=\\\"\\\">All types</option>\\n                              <option value=\\\"Retail\\\">Retail</option>\\n                              <option value=\\\"Wholesale\\\">Wholesale</option>\\n                              <option value=\\\"Discount\\\">Discount</option>\\n                            </select>\\n                          </div>\\n                        </div>\\n                      </div>\\n                    </div>\\n\\n\\n                    <div class=\\\"input-group mb-2 mr-sm-4\\\">\\n                      <div class=\\\"form-sample\\\">\\n                        <div class=\\\"row\\\">\\n                          <div class=\\\"col-md-6\\\">\\n                            <label style=\\\"color: black;\\\">Item type</label>\\n                            <select (change)=\\\"filter_history('item')\\\" [(ngModel)]=\\\"item_filter\\\" class=\\\"form-control\\\">\\n                              <option value=\\\"\\\">Filter by item type</option>\\n                              <option value=\\\"Gas\\\">Gas</option>\\n                              <option value=\\\"Accessory\\\">Accessory</option>\\n                            </select>\\n                          </div>\\n                        </div>\\n                      </div>\\n                    </div>\\n\\n\\n\\n                  </div>\\n\\n                  <div class=\\\"table-responsive\\\">\\n                    <table class=\\\"table\\\">\\n                      <thead>\\n                        <tr>\\n                          <th> User </th>\\n                          <th> Type </th>\\n                          <th> Item </th>\\n                          <th> Quantity </th>\\n                          <th> Price </th>\\n                          <th> Total </th>\\n                          <th> Customer name </th>\\n                          <th> Customer phone </th>\\n                          <th> Amount tendered </th>\\n                          <th> Change </th>\\n                          <th> Ref </th>\\n                          <th> Date </th>\\n                        </tr>\\n                      </thead>\\n                      <tbody *ngFor=\\\"let entry of stored_history\\\">\\n                        <tr>\\n                          <td> {{entry.user}} </td>\\n                          <td> {{entry.type}} </td>\\n                          <td> {{entry.item}} </td>\\n                          <td> {{entry.quantity}} </td>\\n                          <td> {{entry.price}} </td>\\n                          <td> {{entry.total}} </td>\\n\\n                          <td> {{entry.cname}} </td>\\n                          <td> {{entry.cphone}} </td>\\n                          <td> {{entry.amt_ten}} </td>\\n                          <td> {{entry.chng}} </td>\\n                          <td> {{entry.ref}} </td>\\n                          <td> {{entry.createdat}} </td>\\n                        </tr>\\n                      </tbody>\\n                    </table>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n        </div>\\n        <!-- content-wrapper ends -->\\n      </div>\\n      <!-- main-panel ends -->\\n    </div>\\n    <!-- page-body-wrapper ends -->\\n  </div>\\n</ion-content>\";"]}